var _content=function(){"use strict";var Ce=Object.defineProperty;var de=d=>{throw TypeError(d)};var Le=(d,p,f)=>p in d?Ce(d,p,{enumerable:!0,configurable:!0,writable:!0,value:f}):d[p]=f;var ie=(d,p,f)=>Le(d,typeof p!="symbol"?p+"":p,f),ae=(d,p,f)=>p.has(d)||de("Cannot "+f);var F=(d,p,f)=>(ae(d,p,"read from private field"),f?f.call(d):p.get(d)),U=(d,p,f)=>p.has(d)?de("Cannot add the same private member more than once"):p instanceof WeakSet?p.add(d):p.set(d,f),pe=(d,p,f,D)=>(ae(d,p,"write to private field"),D?D.call(d,f):p.set(d,f),f),oe=(d,p,f)=>(ae(d,p,"access private method"),f);var P,E,W,_,K,q,be,Ae;function d(i){return i}const p="#summatube-panel{margin:20px 0;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a;font-family:Roboto,YouTube Sans,sans-serif;max-width:400px;transition:all .3s ease}.summatube-header{padding:12px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1);cursor:pointer}.summatube-header.light{background:#f9f9f9;border-bottom-color:#0000001a}.summatube-header.dark{background:#181818;border-bottom-color:#ffffff1a}.header-left{display:flex;align-items:center}.header-title{font-size:16px;font-weight:500;color:inherit}.header-right{display:flex;align-items:center;gap:8px}.header-icon-btn{background:none;border:none;color:inherit;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;border-radius:4px;opacity:.7;transition:opacity .2s,background .2s}.header-icon-btn:hover{opacity:1;background:#8080801a}.header-icon-btn.disabled{opacity:.4}.header-icon-btn.disabled:hover{opacity:.6}.summatube-tabs{display:flex;border-bottom:1px solid rgba(255,255,255,.1);background:inherit}.summatube-header.light+.summatube-tabs{border-bottom-color:#0000001a;background:#f9f9f9}.summatube-header.dark+.summatube-tabs{border-bottom-color:#ffffff1a;background:#181818}.tab-button{padding:12px 16px;background:none;border:none;color:inherit;font-size:14px;font-weight:500;cursor:pointer;border-bottom:2px solid transparent;transition:border-color .2s;opacity:.7}.tab-button.active{opacity:1;border-bottom-color:#3ea6ff;color:#3ea6ff}.summatube-content{padding:0;max-height:600px;overflow-y:auto;font-size:14px;line-height:1.6;transition:max-height .3s ease,opacity .3s ease}#summatube-panel.minimized .summatube-tabs,#summatube-panel.minimized .summatube-content{max-height:0;opacity:0;overflow:hidden;padding:0;border:none}#summatube-panel.minimized{margin:8px 0}#summatube-panel.minimized .summatube-header{border-bottom:none;padding:8px 16px}.summatube-content.light{background:#fff;color:#0f0f0f}.summatube-content.dark{background:#0f0f0f;color:#e0e0e0}.transcript-list{padding:8px 0}.transcript-line{padding:8px 16px;cursor:pointer;transition:background .2s;position:relative}.transcript-line:hover{background:#8080801a}.transcript-line.active{background:#3ea6ff1a}.transcript-line.active .play-icon{display:inline-block;color:#9333ea;margin-right:8px}.transcript-line:not(.active) .play-icon{display:none}.transcript-line-content{display:flex;align-items:flex-start}.transcript-text{flex:1;word-wrap:break-word}.status-text{text-align:center;padding:60px 20px;color:#aaa;font-style:italic}.status-text .emoji{font-size:48px;margin-bottom:16px;opacity:.3}#summatube-panel::-webkit-scrollbar,.transcript-list::-webkit-scrollbar{width:8px}#summatube-panel::-webkit-scrollbar-track,.transcript-list::-webkit-scrollbar-track{background:transparent}#summatube-panel::-webkit-scrollbar-thumb,.transcript-list::-webkit-scrollbar-thumb{background:#8080804d;border-radius:4px}#summatube-panel::-webkit-scrollbar-thumb:hover,.transcript-list::-webkit-scrollbar-thumb:hover{background:#80808080}.summary-section{margin:0;padding:16px;border-top:1px solid rgba(128,128,128,.2)}.summary-btn{background:#3ea6ff;color:#fff;border:none;padding:10px 16px;border-radius:8px;font-weight:500;font-size:14px;cursor:pointer;transition:background .2s;width:100%;margin-bottom:8px}.summary-btn:hover:not(:disabled){background:#2d8ce6}.summary-btn:disabled{opacity:.7;cursor:not-allowed}.summary-result{margin-top:16px}.summary-card{padding:16px;background:#3ea6ff1a;border-radius:8px;border-left:3px solid #3ea6ff}.summary-title{font-weight:600;font-size:15px;color:#3ea6ff;margin-bottom:12px}.summary-body{font-size:14px;line-height:1.6;margin-bottom:12px}.summary-footer{margin-top:12px;font-size:12px;opacity:.7;text-align:right}.error-text{color:#ff6b6b;font-style:italic;padding:16px;text-align:center;font-size:14px}.api-key-section{margin-bottom:16px;padding:16px;background:#3ea6ff0d;border-radius:8px;border:1px solid rgba(62,166,255,.2)}.api-key-input-group{display:flex;gap:8px;margin-bottom:12px}.api-key-input{flex:1;padding:8px 12px;border:1px solid rgba(128,128,128,.3);border-radius:6px;background:inherit;color:inherit;font-size:14px}.api-key-input:focus{outline:none;border-color:#3ea6ff;box-shadow:0 0 0 2px #3ea6ff33}.save-api-key-btn{background:#3ea6ff;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-weight:500;font-size:14px;cursor:pointer;transition:background .2s}.save-api-key-btn:hover{background:#2d8ce6}.api-key-help{font-size:12px;opacity:.8;text-align:center}.api-link{color:#3ea6ff;text-decoration:underline}.api-key-btn{background:#3ea6ff1a;color:#3ea6ff;border:1px solid rgba(62,166,255,.3);padding:8px 16px;border-radius:6px;font-size:13px;cursor:pointer;transition:all .2s;width:100%}.api-key-btn:hover{background:#3ea6ff33}",f={matches:["*://*.youtube.com/*"],cssInjectionMode:"ui",main(){const i=document.createElement("style");i.textContent=p,document.head.appendChild(i),console.log("SummaTube loaded on YouTube!");const a="https://api.openai.com/v1/chat/completions";let l=null,c=null,x=null,v=[],C=null,T=-1,S=!0;async function N(){return x||(x=(await chrome.storage.sync.get(["openaiApiKey"])).openaiApiKey,x)}async function ee(e){x=e,await chrome.storage.sync.set({openaiApiKey:e})}function B(){return new URLSearchParams(window.location.search).get("v")}function z(e){if(!e)return 0;const r=e.split(":").map(Number);return r.length===2?r[0]*60+r[1]:r.length===3?r[0]*3600+r[1]*60+r[2]:0}async function te(){var e,r,t;try{const o=document.querySelector('button[aria-label*="transcript" i], button[aria-label*="Transcript" i]');if(!o)return null;o.click(),await new Promise(m=>setTimeout(m,2e3));const b=document.querySelectorAll("ytd-transcript-segment-renderer");if(b.length===0)return(e=document.querySelector('button[aria-label*="Close transcript" i]'))==null||e.click(),null;const A=Array.from(b).map(m=>{var w,I;const u=m.querySelector('[class*="timestamp"], .cue-group-start-offset'),y=m.querySelector('[class*="text"], .cue, yt-formatted-string'),k=((w=u==null?void 0:u.textContent)==null?void 0:w.trim())||"",h=((I=y==null?void 0:y.textContent)==null?void 0:I.trim())||"";return{time:k,text:h,seconds:z(k)}}).filter(m=>m.text);(r=document.querySelector('button[aria-label*="Close transcript" i]'))==null||r.click();const n=A.map(m=>m.text).join(" ");return{segments:A,fullTranscript:n}}catch{return(t=document.querySelector('button[aria-label*="Close transcript" i]'))==null||t.click(),null}}function G(e){const r=document.querySelector("video");r&&(r.currentTime=e,r.play())}function L(){C&&clearInterval(C),C=window.setInterval(()=>{const e=document.querySelector("video");if(!e||v.length===0)return;const r=e.currentTime;let t=-1;for(let o=v.length-1;o>=0;o--)if(r>=v[o].seconds){t=o;break}t!==T&&(T=t,R(t))},100)}function M(){C&&(clearInterval(C),C=null)}function R(e){const r=document.getElementById("summatube-transcript-list");r&&r.querySelectorAll(".transcript-line").forEach((t,o)=>{t.classList.remove("active"),o===e&&(t.classList.add("active"),S&&t.scrollIntoView({behavior:"smooth",block:"center"}))})}async function re(){const e=await chrome.storage.sync.get(["autoScrollEnabled"]);S=e.autoScrollEnabled!==void 0?e.autoScrollEnabled:!0}async function Y(){S=!S,await chrome.storage.sync.set({autoScrollEnabled:S}),Z()}function Z(){const e=document.getElementById("summatube-auto-scroll-btn");if(!e)return;e.classList.toggle("disabled",!S),e.title=S?"Disable auto-scroll":"Enable auto-scroll";const r=e.querySelector("svg");r&&(S?r.innerHTML='<path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>':r.innerHTML='<path d="M18 8h-1V6c0-2.76-2.24-5-5-5S7 3.24 7 6v2H6c-1.1 0-2 .9-2 2v10c0 1.1.9 2 2 2h12c1.1 0 2-.9 2-2V10c0-1.1-.9-2-2-2zm-6 9c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2zm3.1-9H8.9V6c0-1.71 1.39-3.1 3.1-3.1 1.71 0 3.1 1.39 3.1 3.1v2z"/>')}async function J(e,r){var o,b,A;if(c&&c.video_id===e)return c;const t=await N();if(!t)return{error:"Please set your OpenAI API key first.",title:"",summary:"",video_id:""};try{const n=await fetch(a,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that summarizes YouTube video transcripts. Provide a concise but comprehensive summary of the video content, highlighting the main points and key takeaways."},{role:"user",content:`Please summarize this YouTube video transcript:

${r}`}],max_tokens:500,temperature:.7})});if(!n.ok){const k=await n.json().catch(()=>({error:{message:"Unknown error"}}));throw new Error(((o=k.error)==null?void 0:o.message)||`HTTP ${n.status}`)}const y={title:"Video Summary",summary:((A=(b=(await n.json()).choices[0])==null?void 0:b.message)==null?void 0:A.content)||"No summary generated",video_id:e};return c=y,y}catch(n){return console.error("OpenAI API error:",n),{error:`Failed to generate summary: ${n.message}`,title:"",summary:"",video_id:""}}}async function Q(e){var ue;(ue=document.getElementById("summatube-panel"))==null||ue.remove(),M();const r=document.getElementById("secondary")||document.querySelector("#related");if(!r)return;l=B();const t=document.createElement("div");t.id="summatube-panel";const o=document.documentElement.hasAttribute("dark")||document.body.classList.contains("ytd-watch-flexy--dark-theme");t.classList.add(o?"dark":"light"),e&&e!=="loading"?v=e.segments:v=[];let b="";e?e==="loading"?b=`
          <div class="status-text">
            <div class="emoji">‚è≥</div>
            <div>Loading transcript...</div>
          </div>`:b=e.segments.map((g,ne)=>`
            <div class="transcript-line" data-index="${ne}" data-seconds="${g.seconds}">
              <div class="transcript-line-content">
                <span class="play-icon">‚ñ∂</span>
                <span class="transcript-text">${g.text}</span>
              </div>
            </div>`).join(""):b=`
          <div class="status-text">
            <div class="emoji">üìú</div>
            <div>No transcript available.</div>
          </div>`;const A=e&&e!=="loading"&&e.fullTranscript;let n="";A&&(n=`
          <div class="summary-section">
            <div id="summatube-api-key-section" class="api-key-section" style="display:none;">
              <div class="api-key-input-group">
                <input type="password" id="summatube-api-key-input" class="api-key-input"
                       placeholder="Enter your OpenAI API key">
                <button id="summatube-save-api-key-btn" class="save-api-key-btn">Save Key</button>
              </div>
              <div class="api-key-help">
                Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank" class="api-link">OpenAI Platform</a>
              </div>
            </div>
            <div id="summatube-summary-controls">
              <button id="summatube-summary-btn" class="summary-btn">
                ‚ú® Generate AI Summary
              </button>
              <button id="summatube-api-key-btn" class="api-key-btn">üîë Set API Key</button>
            </div>
            <div id="summatube-summary-result" class="summary-result" style="display:none;"></div>
          </div>
        `),t.innerHTML=`
        <div class="summatube-header ${o?"dark":"light"}">
          <div class="header-left">
            <div class="header-title">SummaTube</div>
          </div>
          <div class="header-right">
            <button id="summatube-auto-scroll-btn" class="header-icon-btn" title="Toggle auto-scroll">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M7.41 8.59L12 13.17l4.59-4.58L18 10l-6 6-6-6 1.41-1.41z"/>
              </svg>
            </button>
            <button id="summatube-settings-btn" class="header-icon-btn" title="Settings">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
              </svg>
            </button>
            <button id="summatube-close-btn" class="header-icon-btn" title="Minimize">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 13H5v-2h14v2z"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="summatube-tabs">
          <button class="tab-button active" data-tab="subtitles">Subtitles</button>
        </div>
        <div class="summatube-content ${o?"dark":"light"}">
          <div id="summatube-transcript-list" class="transcript-list">
            ${b}
          </div>
          ${n}
        </div>
      `,await re();const m=t.querySelector("#summatube-close-btn"),u=()=>{const g=m.querySelector("svg");g&&(t.classList.contains("minimized")?(g.innerHTML='<path d="M19 13H5v-2h14v2z"/>',m.title="Expand"):(g.innerHTML='<path d="M19 13H5v-2h14v2z"/>',m.title="Minimize"))};m.addEventListener("click",g=>{g.stopPropagation(),t.classList.toggle("minimized"),u(),t.classList.contains("minimized")?M():e&&e!=="loading"&&v.length>0&&L()}),t.querySelector(".summatube-header").addEventListener("click",g=>{g.target.closest(".header-icon-btn")||t.classList.contains("minimized")&&(t.classList.remove("minimized"),u(),e&&e!=="loading"&&v.length>0&&L())});const k=t.querySelector("#summatube-auto-scroll-btn");k&&(Z(),k.addEventListener("click",async()=>{await Y()}));const h=t.querySelector("#summatube-settings-btn"),w=t.querySelector("#summatube-api-key-section"),I=t.querySelector("#summatube-summary-controls"),j=t.querySelector("#summatube-api-key-btn"),X=t.querySelector("#summatube-api-key-input"),ge=t.querySelector("#summatube-save-api-key-btn"),O=t.querySelector("#summatube-summary-btn"),se=t.querySelector("#summatube-summary-result");h&&w&&I&&h.addEventListener("click",()=>{const g=w.style.display==="block";w.style.display=g?"none":"block",I.style.display=g?"block":"none"}),t.querySelectorAll(".transcript-line").forEach(g=>{g.addEventListener("click",()=>{const ne=parseFloat(g.dataset.seconds||"0");G(ne)})}),O&&A&&O.addEventListener("click",async()=>{O.disabled=!0,O.innerHTML="‚è≥ Generating...";const g=await J(l,e.fullTranscript);g.error?se.innerHTML=`<div class="error-text">‚ö†Ô∏è ${g.error}</div>`:se.innerHTML=`
              <div class="summary-card">
                <div class="summary-title">‚ú® AI Summary</div>
                <div class="summary-body">${g.summary}</div>
                <div class="summary-footer">
                  Powered by OpenAI GPT-3.5
                </div>
              </div>
            `,se.style.display="block",O.style.display="none"}),j&&w&&I&&(N().then(g=>{g?j.style.display="none":j.style.display="inline-block"}),j.addEventListener("click",()=>{w.style.display="block",I.style.display="none",X.focus()}),ge.addEventListener("click",async()=>{const g=X.value.trim();g&&(await ee(g),w.style.display="none",I.style.display="block",j.style.display="none",X.value="")}),X.addEventListener("keypress",g=>{g.key==="Enter"&&ge.click()})),r.insertBefore(t,r.firstChild),e&&e!=="loading"&&v.length>0&&L()}async function $(){if(!B())return;await Q("loading");const r=await te();await Q(r||null)}const s=new MutationObserver(()=>{(document.getElementById("secondary")||document.querySelector("#related"))&&(s.disconnect(),setTimeout($,1200))});s.observe(document.body,{childList:!0,subtree:!0}),(document.getElementById("secondary")||document.querySelector("#related"))&&setTimeout($,1200)}};var D=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fe(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var le={exports:{}};(function(i,a){(function(l,c){c(i)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:D,function(l){var c,x;if(!((x=(c=globalThis.chrome)==null?void 0:c.runtime)!=null&&x.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const v="The message port closed before a response was received.",C=T=>{const S={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys(S).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class N extends WeakMap{constructor(e,r=void 0){super(r),this.createItem=e}get(e){return this.has(e)||this.set(e,this.createItem(e)),super.get(e)}}const ee=s=>s&&typeof s=="object"&&typeof s.then=="function",B=(s,e)=>(...r)=>{T.runtime.lastError?s.reject(new Error(T.runtime.lastError.message)):e.singleCallbackArg||r.length<=1&&e.singleCallbackArg!==!1?s.resolve(r[0]):s.resolve(r)},z=s=>s==1?"argument":"arguments",te=(s,e)=>function(t,...o){if(o.length<e.minArgs)throw new Error(`Expected at least ${e.minArgs} ${z(e.minArgs)} for ${s}(), got ${o.length}`);if(o.length>e.maxArgs)throw new Error(`Expected at most ${e.maxArgs} ${z(e.maxArgs)} for ${s}(), got ${o.length}`);return new Promise((b,A)=>{if(e.fallbackToNoCallback)try{t[s](...o,B({resolve:b,reject:A},e))}catch(n){console.warn(`${s} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,n),t[s](...o),e.fallbackToNoCallback=!1,e.noCallback=!0,b()}else e.noCallback?(t[s](...o),b()):t[s](...o,B({resolve:b,reject:A},e))})},G=(s,e,r)=>new Proxy(e,{apply(t,o,b){return r.call(o,s,...b)}});let L=Function.call.bind(Object.prototype.hasOwnProperty);const M=(s,e={},r={})=>{let t=Object.create(null),o={has(A,n){return n in s||n in t},get(A,n,m){if(n in t)return t[n];if(!(n in s))return;let u=s[n];if(typeof u=="function")if(typeof e[n]=="function")u=G(s,s[n],e[n]);else if(L(r,n)){let y=te(n,r[n]);u=G(s,s[n],y)}else u=u.bind(s);else if(typeof u=="object"&&u!==null&&(L(e,n)||L(r,n)))u=M(u,e[n],r[n]);else if(L(r,"*"))u=M(u,e[n],r["*"]);else return Object.defineProperty(t,n,{configurable:!0,enumerable:!0,get(){return s[n]},set(y){s[n]=y}}),u;return t[n]=u,u},set(A,n,m,u){return n in t?t[n]=m:s[n]=m,!0},defineProperty(A,n,m){return Reflect.defineProperty(t,n,m)},deleteProperty(A,n){return Reflect.deleteProperty(t,n)}},b=Object.create(s);return new Proxy(b,o)},R=s=>({addListener(e,r,...t){e.addListener(s.get(r),...t)},hasListener(e,r){return e.hasListener(s.get(r))},removeListener(e,r){e.removeListener(s.get(r))}}),re=new N(s=>typeof s!="function"?s:function(r){const t=M(r,{},{getContent:{minArgs:0,maxArgs:0}});s(t)}),Y=new N(s=>typeof s!="function"?s:function(r,t,o){let b=!1,A,n=new Promise(k=>{A=function(h){b=!0,k(h)}}),m;try{m=s(r,t,A)}catch(k){m=Promise.reject(k)}const u=m!==!0&&ee(m);if(m!==!0&&!u&&!b)return!1;const y=k=>{k.then(h=>{o(h)},h=>{let w;h&&(h instanceof Error||typeof h.message=="string")?w=h.message:w="An unexpected error occurred",o({__mozWebExtensionPolyfillReject__:!0,message:w})}).catch(h=>{console.error("Failed to send onMessage rejected reply",h)})};return y(u?m:n),!0}),Z=({reject:s,resolve:e},r)=>{T.runtime.lastError?T.runtime.lastError.message===v?e():s(new Error(T.runtime.lastError.message)):r&&r.__mozWebExtensionPolyfillReject__?s(new Error(r.message)):e(r)},J=(s,e,r,...t)=>{if(t.length<e.minArgs)throw new Error(`Expected at least ${e.minArgs} ${z(e.minArgs)} for ${s}(), got ${t.length}`);if(t.length>e.maxArgs)throw new Error(`Expected at most ${e.maxArgs} ${z(e.maxArgs)} for ${s}(), got ${t.length}`);return new Promise((o,b)=>{const A=Z.bind(null,{resolve:o,reject:b});t.push(A),r.sendMessage(...t)})},Q={devtools:{network:{onRequestFinished:R(re)}},runtime:{onMessage:R(Y),onMessageExternal:R(Y),sendMessage:J.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:J.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},$={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return S.privacy={network:{"*":$},services:{"*":$},websites:{"*":$}},M(T,Q,S)};l.exports=C(chrome)}else l.exports=globalThis.browser})})(le);var xe=le.exports,ce=fe(xe);const he={};function H(i,...a){}var ye={debug:(...i)=>H(console.debug,...i),log:(...i)=>H(console.log,...i),warn:(...i)=>H(console.warn,...i),error:(...i)=>H(console.error,...i)},ve=(P=class extends Event{constructor(a,l){super(P.EVENT_NAME,{}),this.newUrl=a,this.oldUrl=l}},ie(P,"EVENT_NAME",me("wxt:locationchange")),P);function me(i){const a=typeof he>"u"?"build":"content";return`${ce.runtime.id}:${a}:${i}`}function ke(i){let a,l;return{run(){a==null&&(l=new URL(location.href),a=i.setInterval(()=>{let c=new URL(location.href);c.href!==l.href&&(window.dispatchEvent(new ve(c,l)),l=c)},1e3))}}}var we=(E=class{constructor(a,l){U(this,q);U(this,W,window.self===window.top);U(this,_);U(this,K,ke(this));this.contentScriptName=a,this.options=l,pe(this,_,new AbortController),F(this,W)&&oe(this,q,be).call(this),this.setTimeout(()=>{oe(this,q,Ae).call(this)})}get signal(){return F(this,_).signal}abort(a){return F(this,_).abort(a)}get isInvalid(){return ce.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(a){return this.signal.addEventListener("abort",a),()=>this.signal.removeEventListener("abort",a)}block(){return new Promise(()=>{})}setInterval(a,l){const c=setInterval(()=>{this.isValid&&a()},l);return this.onInvalidated(()=>clearInterval(c)),c}setTimeout(a,l){const c=setTimeout(()=>{this.isValid&&a()},l);return this.onInvalidated(()=>clearTimeout(c)),c}requestAnimationFrame(a){const l=requestAnimationFrame((...c)=>{this.isValid&&a(...c)});return this.onInvalidated(()=>cancelAnimationFrame(l)),l}requestIdleCallback(a,l){const c=requestIdleCallback((...x)=>{this.signal.aborted||a(...x)},l);return this.onInvalidated(()=>cancelIdleCallback(c)),c}addEventListener(a,l,c,x){var v;l==="wxt:locationchange"&&this.isValid&&F(this,K).run(),(v=a.addEventListener)==null||v.call(a,l.startsWith("wxt:")?me(l):l,c,{...x,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),ye.debug(`Content script "${this.contentScriptName}" context invalidated`)}},W=new WeakMap,_=new WeakMap,K=new WeakMap,q=new WeakSet,be=function(){window.postMessage({type:E.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")},Ae=function(){const a=l=>{var c,x;((c=l.data)==null?void 0:c.type)===E.SCRIPT_STARTED_MESSAGE_TYPE&&((x=l.data)==null?void 0:x.contentScriptName)===this.contentScriptName&&this.notifyInvalidated()};addEventListener("message",a),this.onInvalidated(()=>removeEventListener("message",a))},ie(E,"SCRIPT_STARTED_MESSAGE_TYPE","wxt:content-script-started"),E);function Pe(){}function V(i,...a){}var Se={debug:(...i)=>V(console.debug,...i),log:(...i)=>V(console.log,...i),warn:(...i)=>V(console.warn,...i),error:(...i)=>V(console.error,...i)},Te=(async()=>{try{const{main:i,...a}=f,l=new we("content",a);return await i(l)}catch(i){throw Se.error('The content script "content" crashed on startup!',i),i}})(),Ee=Te;return Ee}();
_content;
