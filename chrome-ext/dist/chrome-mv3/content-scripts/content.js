var _content=function(){"use strict";var he=Object.defineProperty;var ae=p=>{throw TypeError(p)};var ve=(p,b,y)=>b in p?he(p,b,{enumerable:!0,configurable:!0,writable:!0,value:y}):p[b]=y;var ee=(p,b,y)=>ve(p,typeof b!="symbol"?b+"":b,y),te=(p,b,y)=>b.has(p)||ae("Cannot "+y);var O=(p,b,y)=>(te(p,b,"read from private field"),y?y.call(p):b.get(p)),F=(p,b,y)=>b.has(p)?ae("Cannot add the same private member more than once"):b instanceof WeakSet?b.add(p):b.set(p,y),oe=(p,b,y,z)=>(te(p,b,"write to private field"),z?z.call(p,y):b.set(p,y),y),re=(p,b,y)=>(te(p,b,"access private method"),y);var P,C,D,_,K,M,le,ce;function p(i){return i}const b="#summatube-panel{margin:20px 0;border-radius:12px;overflow:hidden;box-shadow:0 2px 8px #0000001a;font-family:Roboto,YouTube Sans,sans-serif;max-width:400px;transition:all .3s ease}.summatube-header{padding:12px 16px;display:flex;justify-content:space-between;align-items:center;border-bottom:1px solid rgba(255,255,255,.1)}.summatube-header.light{background:#f9f9f9;border-bottom-color:#0000001a}.summatube-header.dark{background:#181818;border-bottom-color:#ffffff1a}.header-left{display:flex;align-items:center}.header-title{font-size:16px;font-weight:500;color:inherit}.header-right{display:flex;align-items:center;gap:8px}.header-icon-btn{background:none;border:none;color:inherit;cursor:pointer;padding:4px;display:flex;align-items:center;justify-content:center;border-radius:4px;opacity:.7;transition:opacity .2s,background .2s}.header-icon-btn:hover{opacity:1;background:#8080801a}.summatube-tabs{display:flex;border-bottom:1px solid rgba(255,255,255,.1);background:inherit}.summatube-header.light+.summatube-tabs{border-bottom-color:#0000001a;background:#f9f9f9}.summatube-header.dark+.summatube-tabs{border-bottom-color:#ffffff1a;background:#181818}.tab-button{padding:12px 16px;background:none;border:none;color:inherit;font-size:14px;font-weight:500;cursor:pointer;border-bottom:2px solid transparent;transition:border-color .2s;opacity:.7}.tab-button.active{opacity:1;border-bottom-color:#3ea6ff;color:#3ea6ff}.summatube-content{padding:0;max-height:600px;overflow-y:auto;font-size:14px;line-height:1.6}.summatube-content.light{background:#fff;color:#0f0f0f}.summatube-content.dark{background:#0f0f0f;color:#e0e0e0}.transcript-list{padding:8px 0}.transcript-line{padding:8px 16px;cursor:pointer;transition:background .2s;position:relative}.transcript-line:hover{background:#8080801a}.transcript-line.active{background:#3ea6ff1a}.transcript-line.active .play-icon{display:inline-block;color:#9333ea;margin-right:8px}.transcript-line:not(.active) .play-icon{display:none}.transcript-line-content{display:flex;align-items:flex-start}.transcript-text{flex:1;word-wrap:break-word}.status-text{text-align:center;padding:60px 20px;color:#aaa;font-style:italic}.status-text .emoji{font-size:48px;margin-bottom:16px;opacity:.3}#summatube-panel::-webkit-scrollbar,.transcript-list::-webkit-scrollbar{width:8px}#summatube-panel::-webkit-scrollbar-track,.transcript-list::-webkit-scrollbar-track{background:transparent}#summatube-panel::-webkit-scrollbar-thumb,.transcript-list::-webkit-scrollbar-thumb{background:#8080804d;border-radius:4px}#summatube-panel::-webkit-scrollbar-thumb:hover,.transcript-list::-webkit-scrollbar-thumb:hover{background:#80808080}.summary-section{margin:0;padding:16px;border-top:1px solid rgba(128,128,128,.2)}.summary-btn{background:#3ea6ff;color:#fff;border:none;padding:10px 16px;border-radius:8px;font-weight:500;font-size:14px;cursor:pointer;transition:background .2s;width:100%;margin-bottom:8px}.summary-btn:hover:not(:disabled){background:#2d8ce6}.summary-btn:disabled{opacity:.7;cursor:not-allowed}.summary-result{margin-top:16px}.summary-card{padding:16px;background:#3ea6ff1a;border-radius:8px;border-left:3px solid #3ea6ff}.summary-title{font-weight:600;font-size:15px;color:#3ea6ff;margin-bottom:12px}.summary-body{font-size:14px;line-height:1.6;margin-bottom:12px}.summary-footer{margin-top:12px;font-size:12px;opacity:.7;text-align:right}.error-text{color:#ff6b6b;font-style:italic;padding:16px;text-align:center;font-size:14px}.api-key-section{margin-bottom:16px;padding:16px;background:#3ea6ff0d;border-radius:8px;border:1px solid rgba(62,166,255,.2)}.api-key-input-group{display:flex;gap:8px;margin-bottom:12px}.api-key-input{flex:1;padding:8px 12px;border:1px solid rgba(128,128,128,.3);border-radius:6px;background:inherit;color:inherit;font-size:14px}.api-key-input:focus{outline:none;border-color:#3ea6ff;box-shadow:0 0 0 2px #3ea6ff33}.save-api-key-btn{background:#3ea6ff;color:#fff;border:none;padding:8px 16px;border-radius:6px;font-weight:500;font-size:14px;cursor:pointer;transition:background .2s}.save-api-key-btn:hover{background:#2d8ce6}.api-key-help{font-size:12px;opacity:.8;text-align:center}.api-link{color:#3ea6ff;text-decoration:underline}.api-key-btn{background:#3ea6ff1a;color:#3ea6ff;border:1px solid rgba(62,166,255,.3);padding:8px 16px;border-radius:6px;font-size:13px;cursor:pointer;transition:all .2s;width:100%}.api-key-btn:hover{background:#3ea6ff33}",y={matches:["*://*.youtube.com/*"],cssInjectionMode:"ui",main(){const i=document.createElement("style");i.textContent=b,document.head.appendChild(i),console.log("SummaTube loaded on YouTube!");const o="https://api.openai.com/v1/chat/completions";let l=null,m=null,v=null,T=[],I=null,E=-1;async function $(){return v||(v=(await chrome.storage.sync.get(["openaiApiKey"])).openaiApiKey,v)}async function V(a){v=a,await chrome.storage.sync.set({openaiApiKey:a})}function G(){return new URLSearchParams(window.location.search).get("v")}function H(a){if(!a)return 0;const g=a.split(":").map(Number);return g.length===2?g[0]*60+g[1]:g.length===3?g[0]*3600+g[1]*60+g[2]:0}async function q(){var a,g,c;try{const e=document.querySelector('button[aria-label*="transcript" i], button[aria-label*="Transcript" i]');if(!e)return null;e.click(),await new Promise(u=>setTimeout(u,2e3));const t=document.querySelectorAll("ytd-transcript-segment-renderer");if(t.length===0)return(a=document.querySelector('button[aria-label*="Close transcript" i]'))==null||a.click(),null;const s=Array.from(t).map(u=>{var A,w;const f=u.querySelector('[class*="timestamp"], .cue-group-start-offset'),d=u.querySelector('[class*="text"], .cue, yt-formatted-string'),r=((A=f==null?void 0:f.textContent)==null?void 0:A.trim())||"",x=((w=d==null?void 0:d.textContent)==null?void 0:w.trim())||"";return{time:r,text:x,seconds:H(r)}}).filter(u=>u.text);(g=document.querySelector('button[aria-label*="Close transcript" i]'))==null||g.click();const n=s.map(u=>u.text).join(" ");return{segments:s,fullTranscript:n}}catch{return(c=document.querySelector('button[aria-label*="Close transcript" i]'))==null||c.click(),null}}function Q(a){const g=document.querySelector("video");g&&(g.currentTime=a,g.play())}function Y(){I&&clearInterval(I),I=window.setInterval(()=>{const a=document.querySelector("video");if(!a||T.length===0)return;const g=a.currentTime;let c=-1;for(let e=T.length-1;e>=0;e--)if(g>=T[e].seconds){c=e;break}c!==E&&(E=c,N(c))},100)}function L(){I&&(clearInterval(I),I=null)}function N(a){const g=document.getElementById("summatube-transcript-list");g&&g.querySelectorAll(".transcript-line").forEach((c,e)=>{c.classList.remove("active"),e===a&&(c.classList.add("active"),c.scrollIntoView({behavior:"smooth",block:"center"}))})}async function B(a,g){var e,t,s;if(m&&m.video_id===a)return m;const c=await $();if(!c)return{error:"Please set your OpenAI API key first.",title:"",summary:"",video_id:""};try{const n=await fetch(o,{method:"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${c}`},body:JSON.stringify({model:"gpt-3.5-turbo",messages:[{role:"system",content:"You are a helpful assistant that summarizes YouTube video transcripts. Provide a concise but comprehensive summary of the video content, highlighting the main points and key takeaways."},{role:"user",content:`Please summarize this YouTube video transcript:

${g}`}],max_tokens:500,temperature:.7})});if(!n.ok){const r=await n.json().catch(()=>({error:{message:"Unknown error"}}));throw new Error(((e=r.error)==null?void 0:e.message)||`HTTP ${n.status}`)}const d={title:"Video Summary",summary:((s=(t=(await n.json()).choices[0])==null?void 0:t.message)==null?void 0:s.content)||"No summary generated",video_id:a};return m=d,d}catch(n){return console.error("OpenAI API error:",n),{error:`Failed to generate summary: ${n.message}`,title:"",summary:"",video_id:""}}}function Z(a){var R;(R=document.getElementById("summatube-panel"))==null||R.remove(),L();const g=document.getElementById("secondary")||document.querySelector("#related");if(!g)return;l=G();const c=document.createElement("div");c.id="summatube-panel";const e=document.documentElement.hasAttribute("dark")||document.body.classList.contains("ytd-watch-flexy--dark-theme");c.classList.add(e?"dark":"light"),a&&a!=="loading"?T=a.segments:T=[];let t="";a?a==="loading"?t=`
          <div class="status-text">
            <div class="emoji">‚è≥</div>
            <div>Loading transcript...</div>
          </div>`:t=a.segments.map((h,X)=>`
            <div class="transcript-line" data-index="${X}" data-seconds="${h.seconds}">
              <div class="transcript-line-content">
                <span class="play-icon">‚ñ∂</span>
                <span class="transcript-text">${h.text}</span>
              </div>
            </div>`).join(""):t=`
          <div class="status-text">
            <div class="emoji">üìú</div>
            <div>No transcript available.</div>
          </div>`;const s=a&&a!=="loading"&&a.fullTranscript;let n="";s&&(n=`
          <div class="summary-section">
            <div id="summatube-api-key-section" class="api-key-section" style="display:none;">
              <div class="api-key-input-group">
                <input type="password" id="summatube-api-key-input" class="api-key-input"
                       placeholder="Enter your OpenAI API key">
                <button id="summatube-save-api-key-btn" class="save-api-key-btn">Save Key</button>
              </div>
              <div class="api-key-help">
                Get your API key from <a href="https://platform.openai.com/api-keys" target="_blank" class="api-link">OpenAI Platform</a>
              </div>
            </div>
            <div id="summatube-summary-controls">
              <button id="summatube-summary-btn" class="summary-btn">
                ‚ú® Generate AI Summary
              </button>
              <button id="summatube-api-key-btn" class="api-key-btn">üîë Set API Key</button>
            </div>
            <div id="summatube-summary-result" class="summary-result" style="display:none;"></div>
          </div>
        `),c.innerHTML=`
        <div class="summatube-header ${e?"dark":"light"}">
          <div class="header-left">
            <div class="header-title">SummaTube</div>
          </div>
          <div class="header-right">
            <button id="summatube-settings-btn" class="header-icon-btn" title="Settings">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19.14,12.94c0.04-0.3,0.06-0.61,0.06-0.94c0-0.32-0.02-0.64-0.07-0.94l2.03-1.58c0.18-0.14,0.23-0.41,0.12-0.61 l-1.92-3.32c-0.12-0.22-0.37-0.29-0.59-0.22l-2.39,0.96c-0.5-0.38-1.03-0.7-1.62-0.94L14.4,2.81c-0.04-0.24-0.24-0.41-0.48-0.41 h-3.84c-0.24,0-0.43,0.17-0.47,0.41L9.25,5.35C8.66,5.59,8.12,5.92,7.63,6.29L5.24,5.33c-0.22-0.08-0.47,0-0.59,0.22L2.74,8.87 C2.62,9.08,2.66,9.34,2.86,9.48l2.03,1.58C4.84,11.36,4.82,11.69,4.82,12s0.02,0.64,0.07,0.94l-2.03,1.58 c-0.18,0.14-0.23,0.41-0.12,0.61l1.92,3.32c0.12,0.22,0.37,0.29,0.59,0.22l2.39-0.96c0.5,0.38,1.03,0.7,1.62,0.94l0.36,2.54 c0.05,0.24,0.24,0.41,0.48,0.41h3.84c0.24,0,0.44-0.17,0.47-0.41l0.36-2.54c0.59-0.24,1.13-0.56,1.62-0.94l2.39,0.96 c0.22,0.08,0.47,0,0.59-0.22l1.92-3.32c0.12-0.22,0.07-0.47-0.12-0.61L19.14,12.94z M12,15.6c-1.98,0-3.6-1.62-3.6-3.6 s1.62-3.6,3.6-3.6s3.6,1.62,3.6,3.6S13.98,15.6,12,15.6z"/>
              </svg>
            </button>
            <button id="summatube-close-btn" class="header-icon-btn" title="Close">
              <svg width="16" height="16" viewBox="0 0 24 24" fill="currentColor">
                <path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12z"/>
              </svg>
            </button>
          </div>
        </div>
        <div class="summatube-tabs">
          <button class="tab-button active" data-tab="subtitles">Subtitles</button>
        </div>
        <div class="summatube-content ${e?"dark":"light"}">
          <div id="summatube-transcript-list" class="transcript-list">
            ${t}
          </div>
          ${n}
        </div>
      `,c.querySelector("#summatube-close-btn").addEventListener("click",()=>{L(),c.remove()});const f=c.querySelector("#summatube-settings-btn"),d=c.querySelector("#summatube-api-key-section"),r=c.querySelector("#summatube-summary-controls"),x=c.querySelector("#summatube-api-key-btn"),A=c.querySelector("#summatube-api-key-input"),w=c.querySelector("#summatube-save-api-key-btn"),S=c.querySelector("#summatube-summary-btn"),k=c.querySelector("#summatube-summary-result");f&&d&&r&&f.addEventListener("click",()=>{const h=d.style.display==="block";d.style.display=h?"none":"block",r.style.display=h?"block":"none"}),c.querySelectorAll(".transcript-line").forEach(h=>{h.addEventListener("click",()=>{const X=parseFloat(h.dataset.seconds||"0");Q(X)})}),S&&s&&S.addEventListener("click",async()=>{S.disabled=!0,S.innerHTML="‚è≥ Generating...";const h=await B(l,a.fullTranscript);h.error?k.innerHTML=`<div class="error-text">‚ö†Ô∏è ${h.error}</div>`:k.innerHTML=`
              <div class="summary-card">
                <div class="summary-title">‚ú® AI Summary</div>
                <div class="summary-body">${h.summary}</div>
                <div class="summary-footer">
                  Powered by OpenAI GPT-3.5
                </div>
              </div>
            `,k.style.display="block",S.style.display="none"}),x&&d&&r&&($().then(h=>{h?x.style.display="none":x.style.display="inline-block"}),x.addEventListener("click",()=>{d.style.display="block",r.style.display="none",A.focus()}),w.addEventListener("click",async()=>{const h=A.value.trim();h&&(await V(h),d.style.display="none",r.style.display="block",x.style.display="none",A.value="")}),A.addEventListener("keypress",h=>{h.key==="Enter"&&w.click()})),g.insertBefore(c,g.firstChild),a&&a!=="loading"&&T.length>0&&Y()}async function j(){if(!G())return;Z("loading");const g=await q();Z(g||null)}const J=new MutationObserver(()=>{(document.getElementById("secondary")||document.querySelector("#related"))&&(J.disconnect(),setTimeout(j,1200))});J.observe(document.body,{childList:!0,subtree:!0}),(document.getElementById("secondary")||document.querySelector("#related"))&&setTimeout(j,1200)}};var z=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function me(i){return i&&i.__esModule&&Object.prototype.hasOwnProperty.call(i,"default")?i.default:i}var se={exports:{}};(function(i,o){(function(l,m){m(i)})(typeof globalThis<"u"?globalThis:typeof self<"u"?self:z,function(l){var m,v;if(!((v=(m=globalThis.chrome)==null?void 0:m.runtime)!=null&&v.id))throw new Error("This script should only be loaded in a browser extension.");if(typeof globalThis.browser>"u"||Object.getPrototypeOf(globalThis.browser)!==Object.prototype){const T="The message port closed before a response was received.",I=E=>{const $={alarms:{clear:{minArgs:0,maxArgs:1},clearAll:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getAll:{minArgs:0,maxArgs:0}},bookmarks:{create:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},getChildren:{minArgs:1,maxArgs:1},getRecent:{minArgs:1,maxArgs:1},getSubTree:{minArgs:1,maxArgs:1},getTree:{minArgs:0,maxArgs:0},move:{minArgs:2,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeTree:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}},browserAction:{disable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},enable:{minArgs:0,maxArgs:1,fallbackToNoCallback:!0},getBadgeBackgroundColor:{minArgs:1,maxArgs:1},getBadgeText:{minArgs:1,maxArgs:1},getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},openPopup:{minArgs:0,maxArgs:0},setBadgeBackgroundColor:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setBadgeText:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},browsingData:{remove:{minArgs:2,maxArgs:2},removeCache:{minArgs:1,maxArgs:1},removeCookies:{minArgs:1,maxArgs:1},removeDownloads:{minArgs:1,maxArgs:1},removeFormData:{minArgs:1,maxArgs:1},removeHistory:{minArgs:1,maxArgs:1},removeLocalStorage:{minArgs:1,maxArgs:1},removePasswords:{minArgs:1,maxArgs:1},removePluginData:{minArgs:1,maxArgs:1},settings:{minArgs:0,maxArgs:0}},commands:{getAll:{minArgs:0,maxArgs:0}},contextMenus:{remove:{minArgs:1,maxArgs:1},removeAll:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},cookies:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:1,maxArgs:1},getAllCookieStores:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},devtools:{inspectedWindow:{eval:{minArgs:1,maxArgs:2,singleCallbackArg:!1}},panels:{create:{minArgs:3,maxArgs:3,singleCallbackArg:!0},elements:{createSidebarPane:{minArgs:1,maxArgs:1}}}},downloads:{cancel:{minArgs:1,maxArgs:1},download:{minArgs:1,maxArgs:1},erase:{minArgs:1,maxArgs:1},getFileIcon:{minArgs:1,maxArgs:2},open:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},pause:{minArgs:1,maxArgs:1},removeFile:{minArgs:1,maxArgs:1},resume:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},extension:{isAllowedFileSchemeAccess:{minArgs:0,maxArgs:0},isAllowedIncognitoAccess:{minArgs:0,maxArgs:0}},history:{addUrl:{minArgs:1,maxArgs:1},deleteAll:{minArgs:0,maxArgs:0},deleteRange:{minArgs:1,maxArgs:1},deleteUrl:{minArgs:1,maxArgs:1},getVisits:{minArgs:1,maxArgs:1},search:{minArgs:1,maxArgs:1}},i18n:{detectLanguage:{minArgs:1,maxArgs:1},getAcceptLanguages:{minArgs:0,maxArgs:0}},identity:{launchWebAuthFlow:{minArgs:1,maxArgs:1}},idle:{queryState:{minArgs:1,maxArgs:1}},management:{get:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},getSelf:{minArgs:0,maxArgs:0},setEnabled:{minArgs:2,maxArgs:2},uninstallSelf:{minArgs:0,maxArgs:1}},notifications:{clear:{minArgs:1,maxArgs:1},create:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:0},getPermissionLevel:{minArgs:0,maxArgs:0},update:{minArgs:2,maxArgs:2}},pageAction:{getPopup:{minArgs:1,maxArgs:1},getTitle:{minArgs:1,maxArgs:1},hide:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setIcon:{minArgs:1,maxArgs:1},setPopup:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},setTitle:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0},show:{minArgs:1,maxArgs:1,fallbackToNoCallback:!0}},permissions:{contains:{minArgs:1,maxArgs:1},getAll:{minArgs:0,maxArgs:0},remove:{minArgs:1,maxArgs:1},request:{minArgs:1,maxArgs:1}},runtime:{getBackgroundPage:{minArgs:0,maxArgs:0},getPlatformInfo:{minArgs:0,maxArgs:0},openOptionsPage:{minArgs:0,maxArgs:0},requestUpdateCheck:{minArgs:0,maxArgs:0},sendMessage:{minArgs:1,maxArgs:3},sendNativeMessage:{minArgs:2,maxArgs:2},setUninstallURL:{minArgs:1,maxArgs:1}},sessions:{getDevices:{minArgs:0,maxArgs:1},getRecentlyClosed:{minArgs:0,maxArgs:1},restore:{minArgs:0,maxArgs:1}},storage:{local:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}},managed:{get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1}},sync:{clear:{minArgs:0,maxArgs:0},get:{minArgs:0,maxArgs:1},getBytesInUse:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}}},tabs:{captureVisibleTab:{minArgs:0,maxArgs:2},create:{minArgs:1,maxArgs:1},detectLanguage:{minArgs:0,maxArgs:1},discard:{minArgs:0,maxArgs:1},duplicate:{minArgs:1,maxArgs:1},executeScript:{minArgs:1,maxArgs:2},get:{minArgs:1,maxArgs:1},getCurrent:{minArgs:0,maxArgs:0},getZoom:{minArgs:0,maxArgs:1},getZoomSettings:{minArgs:0,maxArgs:1},goBack:{minArgs:0,maxArgs:1},goForward:{minArgs:0,maxArgs:1},highlight:{minArgs:1,maxArgs:1},insertCSS:{minArgs:1,maxArgs:2},move:{minArgs:2,maxArgs:2},query:{minArgs:1,maxArgs:1},reload:{minArgs:0,maxArgs:2},remove:{minArgs:1,maxArgs:1},removeCSS:{minArgs:1,maxArgs:2},sendMessage:{minArgs:2,maxArgs:3},setZoom:{minArgs:1,maxArgs:2},setZoomSettings:{minArgs:1,maxArgs:2},update:{minArgs:1,maxArgs:2}},topSites:{get:{minArgs:0,maxArgs:0}},webNavigation:{getAllFrames:{minArgs:1,maxArgs:1},getFrame:{minArgs:1,maxArgs:1}},webRequest:{handlerBehaviorChanged:{minArgs:0,maxArgs:0}},windows:{create:{minArgs:0,maxArgs:1},get:{minArgs:1,maxArgs:2},getAll:{minArgs:0,maxArgs:1},getCurrent:{minArgs:0,maxArgs:1},getLastFocused:{minArgs:0,maxArgs:1},remove:{minArgs:1,maxArgs:1},update:{minArgs:2,maxArgs:2}}};if(Object.keys($).length===0)throw new Error("api-metadata.json has not been included in browser-polyfill");class V extends WeakMap{constructor(t,s=void 0){super(s),this.createItem=t}get(t){return this.has(t)||this.set(t,this.createItem(t)),super.get(t)}}const G=e=>e&&typeof e=="object"&&typeof e.then=="function",H=(e,t)=>(...s)=>{E.runtime.lastError?e.reject(new Error(E.runtime.lastError.message)):t.singleCallbackArg||s.length<=1&&t.singleCallbackArg!==!1?e.resolve(s[0]):e.resolve(s)},q=e=>e==1?"argument":"arguments",Q=(e,t)=>function(n,...u){if(u.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${q(t.minArgs)} for ${e}(), got ${u.length}`);if(u.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${q(t.maxArgs)} for ${e}(), got ${u.length}`);return new Promise((f,d)=>{if(t.fallbackToNoCallback)try{n[e](...u,H({resolve:f,reject:d},t))}catch(r){console.warn(`${e} API method doesn't seem to support the callback parameter, falling back to call it without a callback: `,r),n[e](...u),t.fallbackToNoCallback=!1,t.noCallback=!0,f()}else t.noCallback?(n[e](...u),f()):n[e](...u,H({resolve:f,reject:d},t))})},Y=(e,t,s)=>new Proxy(t,{apply(n,u,f){return s.call(u,e,...f)}});let L=Function.call.bind(Object.prototype.hasOwnProperty);const N=(e,t={},s={})=>{let n=Object.create(null),u={has(d,r){return r in e||r in n},get(d,r,x){if(r in n)return n[r];if(!(r in e))return;let A=e[r];if(typeof A=="function")if(typeof t[r]=="function")A=Y(e,e[r],t[r]);else if(L(s,r)){let w=Q(r,s[r]);A=Y(e,e[r],w)}else A=A.bind(e);else if(typeof A=="object"&&A!==null&&(L(t,r)||L(s,r)))A=N(A,t[r],s[r]);else if(L(s,"*"))A=N(A,t[r],s["*"]);else return Object.defineProperty(n,r,{configurable:!0,enumerable:!0,get(){return e[r]},set(w){e[r]=w}}),A;return n[r]=A,A},set(d,r,x,A){return r in n?n[r]=x:e[r]=x,!0},defineProperty(d,r,x){return Reflect.defineProperty(n,r,x)},deleteProperty(d,r){return Reflect.deleteProperty(n,r)}},f=Object.create(e);return new Proxy(f,u)},B=e=>({addListener(t,s,...n){t.addListener(e.get(s),...n)},hasListener(t,s){return t.hasListener(e.get(s))},removeListener(t,s){t.removeListener(e.get(s))}}),Z=new V(e=>typeof e!="function"?e:function(s){const n=N(s,{},{getContent:{minArgs:0,maxArgs:0}});e(n)}),j=new V(e=>typeof e!="function"?e:function(s,n,u){let f=!1,d,r=new Promise(S=>{d=function(k){f=!0,S(k)}}),x;try{x=e(s,n,d)}catch(S){x=Promise.reject(S)}const A=x!==!0&&G(x);if(x!==!0&&!A&&!f)return!1;const w=S=>{S.then(k=>{u(k)},k=>{let R;k&&(k instanceof Error||typeof k.message=="string")?R=k.message:R="An unexpected error occurred",u({__mozWebExtensionPolyfillReject__:!0,message:R})}).catch(k=>{console.error("Failed to send onMessage rejected reply",k)})};return w(A?x:r),!0}),J=({reject:e,resolve:t},s)=>{E.runtime.lastError?E.runtime.lastError.message===T?t():e(new Error(E.runtime.lastError.message)):s&&s.__mozWebExtensionPolyfillReject__?e(new Error(s.message)):t(s)},a=(e,t,s,...n)=>{if(n.length<t.minArgs)throw new Error(`Expected at least ${t.minArgs} ${q(t.minArgs)} for ${e}(), got ${n.length}`);if(n.length>t.maxArgs)throw new Error(`Expected at most ${t.maxArgs} ${q(t.maxArgs)} for ${e}(), got ${n.length}`);return new Promise((u,f)=>{const d=J.bind(null,{resolve:u,reject:f});n.push(d),s.sendMessage(...n)})},g={devtools:{network:{onRequestFinished:B(Z)}},runtime:{onMessage:B(j),onMessageExternal:B(j),sendMessage:a.bind(null,"sendMessage",{minArgs:1,maxArgs:3})},tabs:{sendMessage:a.bind(null,"sendMessage",{minArgs:2,maxArgs:3})}},c={clear:{minArgs:1,maxArgs:1},get:{minArgs:1,maxArgs:1},set:{minArgs:1,maxArgs:1}};return $.privacy={network:{"*":c},services:{"*":c},websites:{"*":c}},N(E,g,$)};l.exports=I(chrome)}else l.exports=globalThis.browser})})(se);var ge=se.exports,ne=me(ge);const ue={};function U(i,...o){}var de={debug:(...i)=>U(console.debug,...i),log:(...i)=>U(console.log,...i),warn:(...i)=>U(console.warn,...i),error:(...i)=>U(console.error,...i)},Ae=(P=class extends Event{constructor(o,l){super(P.EVENT_NAME,{}),this.newUrl=o,this.oldUrl=l}},ee(P,"EVENT_NAME",ie("wxt:locationchange")),P);function ie(i){const o=typeof ue>"u"?"build":"content";return`${ne.runtime.id}:${o}:${i}`}function pe(i){let o,l;return{run(){o==null&&(l=new URL(location.href),o=i.setInterval(()=>{let m=new URL(location.href);m.href!==l.href&&(window.dispatchEvent(new Ae(m,l)),l=m)},1e3))}}}var be=(C=class{constructor(o,l){F(this,M);F(this,D,window.self===window.top);F(this,_);F(this,K,pe(this));this.contentScriptName=o,this.options=l,oe(this,_,new AbortController),O(this,D)&&re(this,M,le).call(this),this.setTimeout(()=>{re(this,M,ce).call(this)})}get signal(){return O(this,_).signal}abort(o){return O(this,_).abort(o)}get isInvalid(){return ne.runtime.id==null&&this.notifyInvalidated(),this.signal.aborted}get isValid(){return!this.isInvalid}onInvalidated(o){return this.signal.addEventListener("abort",o),()=>this.signal.removeEventListener("abort",o)}block(){return new Promise(()=>{})}setInterval(o,l){const m=setInterval(()=>{this.isValid&&o()},l);return this.onInvalidated(()=>clearInterval(m)),m}setTimeout(o,l){const m=setTimeout(()=>{this.isValid&&o()},l);return this.onInvalidated(()=>clearTimeout(m)),m}requestAnimationFrame(o){const l=requestAnimationFrame((...m)=>{this.isValid&&o(...m)});return this.onInvalidated(()=>cancelAnimationFrame(l)),l}requestIdleCallback(o,l){const m=requestIdleCallback((...v)=>{this.signal.aborted||o(...v)},l);return this.onInvalidated(()=>cancelIdleCallback(m)),m}addEventListener(o,l,m,v){var T;l==="wxt:locationchange"&&this.isValid&&O(this,K).run(),(T=o.addEventListener)==null||T.call(o,l.startsWith("wxt:")?ie(l):l,m,{...v,signal:this.signal})}notifyInvalidated(){this.abort("Content script context invalidated"),de.debug(`Content script "${this.contentScriptName}" context invalidated`)}},D=new WeakMap,_=new WeakMap,K=new WeakMap,M=new WeakSet,le=function(){window.postMessage({type:C.SCRIPT_STARTED_MESSAGE_TYPE,contentScriptName:this.contentScriptName},"*")},ce=function(){const o=l=>{var m,v;((m=l.data)==null?void 0:m.type)===C.SCRIPT_STARTED_MESSAGE_TYPE&&((v=l.data)==null?void 0:v.contentScriptName)===this.contentScriptName&&this.notifyInvalidated()};addEventListener("message",o),this.onInvalidated(()=>removeEventListener("message",o))},ee(C,"SCRIPT_STARTED_MESSAGE_TYPE","wxt:content-script-started"),C);function we(){}function W(i,...o){}var fe={debug:(...i)=>W(console.debug,...i),log:(...i)=>W(console.log,...i),warn:(...i)=>W(console.warn,...i),error:(...i)=>W(console.error,...i)},xe=(async()=>{try{const{main:i,...o}=y,l=new be("content",o);return await i(l)}catch(i){throw fe.error('The content script "content" crashed on startup!',i),i}})(),ye=xe;return ye}();
_content;
